aW1wb3J0IHsgQ29tcG9uZW50UHJvcHMsIGNyZWF0ZUNvbnRleHQsIHVzZUNv
bnRleHQsIHVzZUlkIH0gZnJvbSAicmVhY3QiCmltcG9ydCAqIGFzIExhYmVs
UHJpbWl0aXZlIGZyb20gIkByYWRpeC11aS9yZWFjdC1sYWJlbCIKaW1wb3J0
IHsgU2xvdCB9IGZyb20gIkByYWRpeC11aS9yZWFjdC1zbG90IgppbXBvcnQg
ewogIENvbnRyb2xsZXIsCiAgRm9ybVByb3ZpZGVyLAogIHVzZUZvcm1Db250
ZXh0LAogIHVzZUZvcm1TdGF0ZSwKICB0eXBlIENvbnRyb2xsZXJQcm9wcywK
ICB0eXBlIEZpZWxkUGF0aCwKICB0eXBlIEZpZWxkVmFsdWVzLAp9IGZyb20g
InJlYWN0LWhvb2stZm9ybSIKCmltcG9ydCB7IGNuIH0gZnJvbSAiQC9saWIv
dXRpbHMiCmltcG9ydCB7IExhYmVsIH0gZnJvbSAiQC9jb21wb25lbnRzL3Vp
L2xhYmVsIgoKY29uc3QgRm9ybSA9IEZvcm1Qcm92aWRlcgoKdHlwZSBGb3Jt
RmllbGRDb250ZXh0VmFsdWU8CiAgVEZpZWxkVmFsdWVzIGV4dGVuZHMgRmll
bGRWYWx1ZXMgPSBGaWVsZFZhbHVlcywKICBUTmFtZSBleHRlbmRzIEZpZWxk
UGF0aDxURmllbGRWYWx1ZXM+ID0gRmllbGRQYXRoPFRGaWVsZFZhbHVlcz4s
Cj4gPSB7CiAgbmFtZTogVE5hbWUKfQoKY29uc3QgRm9ybUZpZWxkQ29udGV4
dCA9IGNyZWF0ZUNvbnRleHQ8Rm9ybUZpZWxkQ29udGV4dFZhbHVlPigKICB7
fSBhcyBGb3JtRmllbGRDb250ZXh0VmFsdWUKKQoKY29uc3QgRm9ybUZpZWxk
ID0gPAogIFRGaWVsZFZhbHVlcyBleHRlbmRzIEZpZWxkVmFsdWVzID0gRmll
bGRWYWx1ZXMsCiAgVE5hbWUgZXh0ZW5kcyBGaWVsZFBhdGg8VEZpZWxkVmFs
dWVzPiA9IEZpZWxkUGF0aDxURmllbGRWYWx1ZXM+LAo+KHsKICAuLi5wcm9w
cwp9OiBDb250cm9sbGVyUHJvcHM8VEZpZWxkVmFsdWVzLCBUTmFtZT4pID0+
IHsKICByZXR1cm4gKAogICAgPEZvcm1GaWVsZENvbnRleHQuUHJvdmlkZXIg
dmFsdWU9e3sgbmFtZTogcHJvcHMubmFtZSB9fT4KICAgICAgPENvbnRyb2xs
ZXIgey4uLnByb3BzfSAvPgogICAgPC9Gb3JtRmllbGRDb250ZXh0LlByb3Zp
ZGVyPgogICkKfQoKY29uc3QgdXNlRm9ybUZpZWxkID0gKCkgPT4gewogIGNv
bnN0IGZpZWxkQ29udGV4dCA9IHVzZUNvbnRleHQoRm9ybUZpZWxkQ29udGV4
dCkKICBjb25zdCBpdGVtQ29udGV4dCA9IHVzZUNvbnRleHQoRm9ybUl0ZW1D
b250ZXh0KQogIGNvbnN0IHsgZ2V0RmllbGRTdGF0ZSB9ID0gdXNlRm9ybUNv
bnRleHQoKQogIGNvbnN0IGZvcm1TdGF0ZSA9IHVzZUZvcm1TdGF0ZSh7IG5h
bWU6IGZpZWxkQ29udGV4dC5uYW1lIH0pCiAgY29uc3QgZmllbGRTdGF0ZSA9
IGdldEZpZWxkU3RhdGUoZmllbGRDb250ZXh0Lm5hbWUsIGZvcm1TdGF0ZSkK
CiAgaWYgKCFmaWVsZENvbnRleHQpIHsKICAgIHRocm93IG5ldyBFcnJvcigi
dXNlRm9ybUZpZWxkIHNob3VsZCBiZSB1c2VkIHdpdGhpbiA8Rm9ybUZpZWxk
PiIpCiAgfQoKICBjb25zdCB7IGlkIH0gPSBpdGVtQ29udGV4dAoKICByZXR1
cm4gewogICAgaWQsCiAgICBuYW1lOiBmaWVsZENvbnRleHQubmFtZSwKICAg
IGZvcm1JdGVtSWQ6IGAke2lkfS1mb3JtLWl0ZW1gLAogICAgZm9ybURlc2Ny
aXB0aW9uSWQ6IGAke2lkfS1mb3JtLWl0ZW0tZGVzY3JpcHRpb25gLAogICAg
Zm9ybU1lc3NhZ2VJZDogYCR7aWR9LWZvcm0taXRlbS1tZXNzYWdlYCwKICAg
IC4uLmZpZWxkU3RhdGUsCiAgfQp9Cgp0eXBlIEZvcm1JdGVtQ29udGV4dFZh
bHVlID0gewogIGlkOiBzdHJpbmcKfQoKY29uc3QgRm9ybUl0ZW1Db250ZXh0
ID0gY3JlYXRlQ29udGV4dDxGb3JtSXRlbUNvbnRleHRWYWx1ZT4oCiAge30g
YXMgRm9ybUl0ZW1Db250ZXh0VmFsdWUKKQoKZnVuY3Rpb24gRm9ybUl0ZW0o
eyBjbGFzc05hbWUsIC4uLnByb3BzIH06IENvbXBvbmVudFByb3BzPCJkaXYi
PikgewogIGNvbnN0IGlkID0gdXNlSWQoKQoKICByZXR1cm4gKAogICAgPEZv
cm1JdGVtQ29udGV4dC5Qcm92aWRlciB2YWx1ZT17eyBpZCB9fT4KICAgICAg
PGRpdgogICAgICAgIGRhdGEtc2xvdD0iZm9ybS1pdGVtIgogICAgICAgIGNs
YXNzTmFtZT17Y24oImdyaWQgZ2FwLTIiLCBjbGFzc05hbWUpfQogICAgICAg
IHsuLi5wcm9wc30KICAgICAgLz4KICAgIDwvRm9ybUl0ZW1Db250ZXh0LlBy
b3ZpZGVyPgogICkKfQoKZnVuY3Rpb24gRm9ybUxhYmVsKHsKICBjbGFzc05h
bWUsCiAgLi4ucHJvcHMKfTogQ29tcG9uZW50UHJvcHM8dHlwZW9mIExhYmVs
UHJpbWl0aXZlLlJvb3Q+KSB7CiAgY29uc3QgeyBlcnJvciwgZm9ybUl0ZW1J
ZCB9ID0gdXNlRm9ybUZpZWxkKCkKCiAgcmV0dXJuICgKICAgIDxMYWJlbAog
ICAgICBkYXRhLXNsb3Q9ImZvcm0tbGFiZWwiCiAgICAgIGRhdGEtZXJyb3I9
eyEhZXJyb3J9CiAgICAgIGNsYXNzTmFtZT17Y24oImRhdGEtW2Vycm9yPXRy
dWVdOnRleHQtZGVzdHJ1Y3RpdmUiLCBjbGFzc05hbWUpfQogICAgICBodG1s
Rm9yPXtmb3JtSXRlbUlkfQogICAgICB7Li4ucHJvcHN9CiAgICAvPgogICkK
fQoKZnVuY3Rpb24gRm9ybUNvbnRyb2woeyAuLi5wcm9wcyB9OiBDb21wb25l
bnRQcm9wczx0eXBlb2YgU2xvdD4pIHsKICBjb25zdCB7IGVycm9yLCBmb3Jt
SXRlbUlkLCBmb3JtRGVzY3JpcHRpb25JZCwgZm9ybU1lc3NhZ2VJZCB9ID0g
dXNlRm9ybUZpZWxkKCkKCiAgcmV0dXJuICgKICAgIDxTbG90CiAgICAgIGRh
dGEtc2xvdD0iZm9ybS1jb250cm9sIgogICAgICBpZD17Zm9ybUl0ZW1JZH0K
ICAgICAgYXJpYS1kZXNjcmliZWRieT17CiAgICAgICAgIWVycm9yCiAgICAg
ICAgICA/IGAke2Zvcm1EZXNjcmlwdGlvbklkfWAKICAgICAgICAgIDogYCR7
Zm9ybURlc2NyaXB0aW9uSWR9ICR7Zm9ybU1lc3NhZ2VJZH1gCiAgICAgIH0K
ICAgICAgYXJpYS1pbnZhbGlkPXshIWVycm9yfQogICAgICB7Li4ucHJvcHN9
CiAgICAvPgogICkKfQoKZnVuY3Rpb24gRm9ybURlc2NyaXB0aW9uKHsgY2xh
c3NOYW1lLCAuLi5wcm9wcyB9OiBDb21wb25lbnRQcm9wczwicCI+KSB7CiAg
Y29uc3QgeyBmb3JtRGVzY3JpcHRpb25JZCB9ID0gdXNlRm9ybUZpZWxkKCkK
CiAgcmV0dXJuICgKICAgIDxwCiAgICAgIGRhdGEtc2xvdD0iZm9ybS1kZXNj
cmlwdGlvbiIKICAgICAgaWQ9e2Zvcm1EZXNjcmlwdGlvbklkfQogICAgICBj
bGFzc05hbWU9e2NuKCJ0ZXh0LW11dGVkLWZvcmVncm91bmQgdGV4dC1zbSIs
IGNsYXNzTmFtZSl9CiAgICAgIHsuLi5wcm9wc30KICAgIC8+CiAgKQp9Cgpm
dW5jdGlvbiBGb3JtTWVzc2FnZSh7IGNsYXNzTmFtZSwgLi4ucHJvcHMgfTog
Q29tcG9uZW50UHJvcHM8InAiPikgewogIGNvbnN0IHsgZXJyb3IsIGZvcm1N
ZXNzYWdlSWQgfSA9IHVzZUZvcm1GaWVsZCgpCiAgY29uc3QgYm9keSA9IGVy
cm9yID8gU3RyaW5nKGVycm9yPy5tZXNzYWdlID8/ICIiKSA6IHByb3BzLmNo
aWxkcmVuCgogIGlmICghYm9keSkgewogICAgcmV0dXJuIG51bGwKICB9Cgog
IHJldHVybiAoCiAgICA8cAogICAgICBkYXRhLXNsb3Q9ImZvcm0tbWVzc2Fn
ZSIKICAgICAgaWQ9e2Zvcm1NZXNzYWdlSWR9CiAgICAgIGNsYXNzTmFtZT17
Y24oInRleHQtZGVzdHJ1Y3RpdmUgdGV4dC1zbSIsIGNsYXNzTmFtZSl9CiAg
ICAgIHsuLi5wcm9wc30KICAgID4KICAgICAge2JvZHl9CiAgICA8L3A+CiAg
KQp9CgpleHBvcnQgewogIHVzZUZvcm1GaWVsZCwKICBGb3JtLAogIEZvcm1J
dGVtLAogIEZvcm1MYWJlbCwKICBGb3JtQ29udHJvbCwKICBGb3JtRGVzY3Jp
cHRpb24sCiAgRm9ybU1lc3NhZ2UsCiAgRm9ybUZpZWxkLAp9Cg==
